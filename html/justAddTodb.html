<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/07_shop.css" />
    <link rel="stylesheet" href="/css/reset.css" />
    <title>Document</title>
  </head>
  <body>
    <!-- <button class="btn">add</button> -->
    <!-- <img src="/img/Surjapuri Mango.png" alt="" /> -->
    <div class="product">
      <div class="product-top">
        <div class="product-top-btn">
          <p class="product-top-btn__text">Filter</p>
          <img src="/img/Filter 24px.svg" alt="" class="product-top-btn__img" />
        </div>
        <div class="product-top-filter">
          <div class="product-top-filter-left">
            <p class="product-top-filter-left__text">Sort by:</p>
            <div class="product-top-filter-left-input">
              <input
                type="text"
                placeholder="Latest"
                class="product-top-filter-left-input-inp"
              />
              <img
                src="/img/chevronDown.png "
                alt=""
                class="product-top-filter-left-input__img"
              />
            </div>
          </div>
          <div class="product-top-filter-right">
            <p class="product-top-filter-right__text">
              <span id="count">0</span> Result Found
            </p>
          </div>
        </div>
      </div>
      <div class="product-container">
        <div class="product-container-dropdown"></div>
        <div class="product-container-items">
          <div class="product-container-items-prod"></div>
          <div class="product-container-items-pagination"></div>
        </div>
      </div>
    </div>
    <script>
      const productFrame = document.querySelector(
        ".product-container-items-prod"
      );
      const productRating = document.querySelectorAll(
        ".product-container-items-prod-card-info-left-rating"
      );
      const URL = "https://ecobazardb-default-rtdb.firebaseio.com/CATALOG.json";

      async function DataParsing() {
        const response = await fetch(URL);
        const data = await response.json();
        return data;
      }

      async function categorization() {
        const data = await DataParsing();
        const keys = Object.keys(data);
        keys.forEach((Element) => {
          data[Element].forEach((fields) => {
            const { img, name, price, rating, sale, stock } = fields;
            console.log(typeof fields);
            toHTML(img, name, price, rating, sale, stock);
          });
        });
      }
      categorization();

      function renderRating(rating) {
        let stars = "";
        for (let i = 1; i <= 5; i++) {
          stars += `<span ${
            i <= rating ? 'id="orangeSpan"' : ""
          }>&#x2605</span>`;
        }
        return stars;
      }

      function toHTML(img, name, price, rating, sale, stock) {
        productFrame.innerHTML += `
        <div class="product-container-items-prod-card">
              <div class="product-container-items-prod-card-frame">
                 <div class="product-container-items-prod-card-frame-properties">
                 ${
                   sale == true
                     ? ` <img src="/img/sale50.png" alt="" class="product-container-items-prod-card-frame-properties__img">`
                     : ""
                 }
                     ${
                       stock == true
                         ? ` <img src="/img/out of stock.png" alt="" class="product-container-items-prod-card-frame-properties__img">`
                         : ""
                     }
                </div>
                <div class="product-container-items-prod-card-frame-hover">
                  <div class="product-container-items-prod-card-frame-hover-frameheart"></div>
                  <div class="product-container-items-prod-card-frame-hover-frameview"></div>
                </div>
                <img
                  src="${img}"
                  alt=""
                  class="product-container-items-prod-card-frame__img"
                />
              </div>
              <div class="product-container-items-prod-card-info">
                <div class="product-container-items-prod-card-info-left">
                  <p class="product-container-items-prod-card-info-left__name">${name}</p>
                  <p class="product-container-items-prod-card-info-left__price">${price}</p>
                  <div class="product-container-items-prod-card-info-left-rating">
                    
                    ${renderRating(rating)}
                  </div>
                </div>
                <div class="product-container-items-prod-card-info-right">
                    <div class="product-container-items-prod-card-info-right-frame">
                    </div>
                </div>
              </div>
            </div>
        `;
      }
    </script>
  </body>
</html>

<!-- 
<div class="product-container-items-prod-card">
              <div class="product-container-items-prod-card-frame">
                <div class="product-container-items-prod-card-frame-hover">
                  <div class="product-container-items-prod-card-frame-hover-frameheart"></div>
                  <div class="product-container-items-prod-card-frame-hover-frameview"></div>
                </div>
                <img
                  src="/img/Fresh Orange.webp"
                  alt=""
                  class="product-container-items-prod-card-frame__img"
                />
              </div>
              <div class="product-container-items-prod-card-info">
                <div class="product-container-items-prod-card-info-left">
                  <p class="product-container-items-prod-card-info-left__name">Green Capsicum</p>
                  <p class="product-container-items-prod-card-info-left__price">$14.99</p>
                  <div class="product-container-items-prod-card-info-left-rating">
                    <span >&#x2605</span>
                    <span >&#x2605</span>
                    <span >&#x2605</span>
                    <span >&#x2605</span>
                    <span >&#x2605</span>
                  </div>
                </div>
                <div class="product-container-items-prod-card-info-right">
                    <div class="product-container-items-prod-card-info-right-frame">
                    </div>
                </div>
              </div>
            </div>
             -->
